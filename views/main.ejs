<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <style>
        body {
            font: 15px arial, san-serif;
            color: white;
            background-color: #06143d;
        }
        .content {
            margin-left: auto;
            margin-right: auto;
            max-width: 1200px;
            margin-bottom: 10em;
            margin-top: 5em;
            position: relative;
        }
        .grid-image-container {
            max-width: 1200px;
            margin: auto;
            width: 100%; 
            display: grid;
            grid-auto-rows: 390px; 
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
            grid-column-gap: 2em;
            grid-row-gap: 6em;
        }
        .item {
            border-radius: 0px;
            padding: 0px;
            color: black;
            /*position: relative;
            overflow: hidden;*/
        }
        .image_attr {
            height: 100%;
            width: 100%;
            object-fit: cover;
            border-radius: 5px;
        }
        .image_default {
            background-color: lightgray;
        }
        .tooltip {
          position: relative;
          display: inline-block;
        }

        .tooltip .tooltip_content {
          visibility: hidden;
          min-width: 300px;
          background-color: white;
          color: black;
          text-align: center;
          border-radius: 6px;
          padding: 10px;
          position: absolute;
          z-index: 1;
          /*bottom 숫자 클수록 위로*/
          bottom: 120%;
          left: 50%;
          margin-left: -60px;
        }

        .tooltip .tooltip_content::after {
          content: "";
          position: absolute;
          top: 100%;
          left: 20%;
          margin-left: -5px;
          border-width: 5px;
          border-style: solid;
          border-color: white transparent transparent transparent;
        }
        .tooltip:hover .tooltip_content {
          visibility: visible;
        }
        #circle {
          width: 60px;
          height: 60px;
          -webkit-border-radius: 30px;
          -moz-border-radius: 30px;
          border-radius: 30px;
          background: white;
        }
        #icon_circle {
          width: 30px;
          height: 30px;
          -webkit-border-radius: 15px;
          -moz-border-radius: 15px;
          border-radius: 15px;
          background: white;
        }
        .tooltip_content_2 {
            grid-column: 2 / span 3;
            grid-row: 1;
            padding-bottom: 10px;
        }
        .text_center {
          text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .tooltip_content_3 {
            grid-column: 1 / span 3;
            grid-row: 2;
            text-align: left;
        }
        .grid {
            display: grid;
            grid-row-gap: 10px;
        }
        .pagination {
          margin-top: 10em;
          text-align: center;
        }
        .title {
          margin-top: 5px;
          color: #f9a602;
          font-weight: normal;
          font-size: 20px;
        }
        .title:hover {
          color: #eb2226;
        }
        a {
          text-decoration: none;
          color: #8fd2ff;
        }
        .margin_bottom {
          margin-bottom: 5px;
        }
        .grid_pagination {
          display: grid;
          grid-template-columns: 1fr 2fr 2fr 1fr;
          grid-template-rows: 1fr;
          grid-gap: 0.5em;
        }
        .button_page {
          border-radius: 6px;
          padding: 20px;
          background: #f9a602;
          color: #041030;
        }
        .button_page:hover {
          background: #eb2226;
          color: white;
        }
        .header {
          font-weight: bold; 
          text-align: center;
          margin-top: 10em;
        }
        .footer {
          text-align: center;
          color: #e3e3e3;
          font-size: 10px;
          margin-bottom: 3em;
        }
    </style>

</head>

<body>

    <div class="header">
      <div style="font-size: 35px;">HACKADAY.IO</div>
    </div>

    <div class="content">

        <!-- grid -->
        <div class="grid-image-container">
            <% for (var i = 0; i < (mainApi[0].projects).length; i++) { %>

                <% if ((mainApi[0].projects[i]).image_url != null) { %>
                <div>
                    <div class="tooltip margin_bottom">
                        <div class="text_center">
                          <img id="icon_circle" src="<%= mainApi[i+1].image_url %>"/>&nbsp;
                          <%= mainApi[i+1].screen_name %>
                        </div>

                        <div class="grid tooltip_content">
                            <div class="tooltip_content_1"><img id="circle" src="<%= mainApi[i+1].image_url %>"/></div>
                            <div class="tooltip_content_2 text_center"><%= mainApi[i+1].projects %>&nbsp;projects&nbsp;|&nbsp;<%= mainApi[i+1].followers %>&nbsp;followers</div>
                            <div class="tooltip_content_3"><%= mainApi[i+1].screen_name %> <br> <%= mainApi[i+1].about_me %></div>
                        </div>
                    </div>

                    <a href="/projects/detail/<%= (mainApi[0].projects[i]).id %>" target="_self">
                      <img class="image_attr" src="<%= (mainApi[0].projects[i]).image_url %>" />
                    </a>

                    <a href="/projects/detail/<%= (mainApi[0].projects[i]).id %>" target="_self">
                      <div class="title"><%= (mainApi[0].projects[i]).name %></div>
                    </a>
                </div>
                <% } else { %>
                <div>
                    <div class="tooltip margin_bottom">
                        <div class="text_center">
                          <img id="icon_circle" src="<%= mainApi[i+1].image_url %>"/>&nbsp;
                          <%= mainApi[i+1].screen_name %>
                        </div>

                        <div class="grid tooltip_content">
                            <div class="tooltip_content_1"><img id="circle" src="<%= mainApi[i+1].image_url %>"/></div>
                            <div class="tooltip_content_2 text_center"><%= mainApi[i+1].projects %>&nbsp;projects&nbsp;|&nbsp;<%= mainApi[i+1].followers %>&nbsp;followers</div>
                            <div class="tooltip_content_3"><%= mainApi[i+1].screen_name %> <br> <%= mainApi[i+1].about_me %></div>
                        </div>
                    </div>

                    <a href="/projects/detail/<%= (mainApi[0].projects[i]).id %>" target="_self">
                      <img class="image_attr image_default" />
                    </a>

                    <a href="/projects/detail/<%= (mainApi[0].projects[i]).id %>" target="_self">
                      <div class="title"><%= (mainApi[0].projects[i]).name %></div>
                    </a>
                </div>
                <% } %>

            <% } %>
        </div>

        <!-- pagination -->
        <div class="pagination">
          <% for (var i = 1; i <= mainApi[0].last_page; i++) { %>
            <% if (i == mainApi[0].page) { %>
              <% if (i == 1) { %>
              <div class="grid_pagination">
                <div></div>
                <div></div>
                <div><a href="/projects/page/<%= i+1 %>" target="_self"><div class="button_page">NEXT&nbsp;&nbsp;></div></a></div>
                <div><a href="/projects/page/<%= mainApi[0].last_page %>" target="_self"><div class="button_page">LAST&nbsp;&nbsp;>></div></a></div>
              </div>
              <% } else if(i == mainApi[0].last_page) { %>
              <div class="grid_pagination">
                <div><a href="/projects/page/<%= 1 %>" target="_self"><div class="button_page"><<&nbsp;&nbsp;FIRST</div></a></div>
                <div><a href="/projects/page/<%= i-1 %>" target="_self"><div class="button_page"><&nbsp;&nbsp;PREVIOUS</div></a></div>
                <div></div>
                <div></div>
              </div>
              <% } else { %>
                <div class="grid_pagination">
                  <div><a href="/projects/page/<%= 1 %>" target="_self"><div class="button_page"><<&nbsp;&nbsp;FIRST</div></a></div>
                  <div><a href="/projects/page/<%= i-1 %>" target="_self"><div class="button_page"><&nbsp;&nbsp;PREVIOUS</div></a></div>
                  <div><a href="/projects/page/<%= i+1 %>" target="_self"><div class="button_page">NEXT&nbsp;&nbsp;></div></a></div>
                  <div><a href="/projects/page/<%= mainApi[0].last_page %>" target="_self"><div class="button_page">LAST&nbsp;&nbsp;>></div></a></div>
                </div>
              <% } %>
              
            <% } %>
          <% } %>
          
          <% var page_id = i %>
        </div>
    </div>

    <div class="footer">
      <div>Service provided by <a href="https://supplyframe.com/" target="_blank">SupplyFrame</a>. API provided by <a href="https://hackaday.io/" target="_blank">Hackaday.io</a>. Developed by <a href="mailto:joo7875@gmail.com">Hyewon Joo</a>.</div>
    </div>


</body>

<script>


      var list = new Array();
      var pageList = new Array();
      var currentPage = 1;
      var perPage = 10;
      var numberOfPages = 0;

      function makeList() {
          for (x = 1; x <= <%= mainApi[0].last_page %>; x++)
              list.push(x);

          numberOfPages = getNumberOfPages();
      }
          
      function getNumberOfPages() {
          return Math.ceil(list.length / perPage);
      }

      function nextPage() {
          currentPage += 1;
          loadList();
      }

      function previousPage() {
          currentPage -= 1;
          loadList();
      }

      function firstPage() {
          currentPage = 1;
          loadList();
      }

      function lastPage() {
          currentPage = numberOfPages;
          loadList();
      }

      function loadList() {
          var begin = ((currentPage - 1) * perPage);
          var end = begin + perPage;

          pageList = list.slice(begin, end);
          drawList();
          check();
      }
          
      function drawList() {
          document.getElementById("list").innerHTML = "";
          for (r = 0; r < pageList.length; r++) {
              document.getElementById("list").innerHTML += pageList[r] + "&nbsp;";
          }
      }

      function check() {
          document.getElementById("next").disabled = currentPage == numberOfPages ? true : false;
          document.getElementById("previous").disabled = currentPage == 1 ? true : false;
          document.getElementById("first").disabled = currentPage == 1 ? true : false;
          document.getElementById("last").disabled = currentPage == numberOfPages ? true : false;
      }

      function load() {
          makeList();
          loadList();
      }
          
      window.onload = load;
  </script>
</html>